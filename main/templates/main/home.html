 <!DOCTYPE html>
<html lang="ru" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrooge VPN</title>
    <style>
        :root {
            --tg-bg-color: #18222d;
            --tg-secondary-bg: #1e2c3a;
            --tg-text-color: #e1e3e6;
            --tg-hint-color: #7d8b99;
            --tg-link-color: #5d9cec;
            --tg-accent-color: #5682a3;
            --tg-red-color: #ec5f5f;
            --tg-green-color: #5fec8f;
            --tg-yellow-color: #f0c04d;
            --tg-border-radius: 12px;
            --tg-spacing: 16px;
            --tg-font: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: var(--tg-font);
        }

        body {
            background-color: var(--tg-bg-color);
            color: var(--tg-text-color);
            line-height: 1.4;
            padding: var(--tg-spacing);
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--tg-spacing);
        }

        .title {
            font-size: 20px;
            font-weight: 700;
        }

        /* Card */
        .card {
            background-color: var(--tg-secondary-bg);
            border-radius: var(--tg-border-radius);
            padding: var(--tg-spacing);
            margin-bottom: var(--tg-spacing);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        /* Accordion */
        .accordion {
            margin-bottom: var(--tg-spacing);
        }

        .accordion-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            cursor: pointer;
        }

        .accordion-title {
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .accordion-icon {
            transition: transform 0.2s;
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
        }

        .accordion.active .accordion-icon {
            transform: rotate(180deg);
        }

        /* Stats grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-top: 12px;
        }

        .stat-item {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 12px;
        }

        .stat-label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
            font-size: 14px;
            color: var(--tg-hint-color);
        }

        .stat-value {
            font-size: 16px;
            font-weight: 500;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 24px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 11px;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: var(--tg-accent-color);
            opacity: 0.3;
        }

        .timeline-item {
            position: relative;
            padding-bottom: 24px;
        }

        .timeline-item:last-child {
            padding-bottom: 0;
        }

        .timeline-bullet {
            position: absolute;
            left: -24px;
            top: 0;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: var(--tg-accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .timeline-content {
            padding-top: 2px;
        }

        .timeline-title {
            font-weight: 500;
            margin-bottom: 8px;
        }

        .timeline-description {
            color: var(--tg-hint-color);
            margin-bottom: 12px;
            font-size: 14px;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 16px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            outline: none;
            text-decoration: none;
        }

        .btn-primary {
            background-color: var(--tg-accent-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: #4a6d8c;
        }

        .btn-outline {
            background-color: transparent;
            color: var(--tg-accent-color);
            border: 1px solid var(--tg-accent-color);
        }

        .btn-outline:hover {
            background-color: rgba(86, 130, 163, 0.1);
        }

        .btn-light {
            background-color: rgba(86, 130, 163, 0.1);
            color: var(--tg-accent-color);
        }

        .btn-light:hover {
            background-color: rgba(86, 130, 163, 0.2);
        }

        .btn-group {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .btn-icon {
            margin-right: 8px;
        }

        /* Select */
        .select {
            position: relative;
            width: 150px;
        }

        .select-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 12px;
            background-color: var(--tg-secondary-bg);
            border-radius: 8px;
            cursor: pointer;
        }

        .select-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: var(--tg-secondary-bg);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            z-index: 10;
            display: none;
            max-height: 200px;
            overflow-y: auto;
        }

        .select-option {
            padding: 8px 12px;
            cursor: pointer;
        }

        .select-option:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .select.active .select-dropdown {
            display: block;
        }

        /* Progress bar */
        .progress-container {
            margin-top: 4px;
            height: 4px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--tg-green-color);
            width: 2.9%;
        }

        /* Utils */
        .text-muted {
            color: var(--tg-hint-color);
        }

        .text-small {
            font-size: 13px;
        }

        .mt-1 {
            margin-top: 4px;
        }

        .mt-2 {
            margin-top: 8px;
        }

        .mt-3 {
            margin-top: 12px;
        }

        .mb-2 {
            margin-bottom: 8px;
        }

        .flex {
            display: flex;
        }

        .items-center {
            align-items: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .w-full {
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="container" id="app">
        <!-- Контент будет сгенерирован JavaScript -->
    </div>
 <script>
    // Данные приложения
    const appData = {
        user: {
            username: "pgecho30",
            status: "Активна",
            expiresAt: "07.08.2025",
            daysLeft: 4,
            trafficUsed: "1.45 GiB",
            trafficLimit: "50.00 GiB",
            trafficPercent: 2.9
        },
        platforms: {
            android: {
                id: "android",
                name: "Android",
                icon: "device-mobile",
                providers: {
                    happ: {
                        name: "Happ",
                        icon: "star",
                        sources: [
                            {
                                name: "Открыть в Google Play",
                                url: "https://play.google.com/store/apps/details?id=com.happproxy",
                            },
                            {
                                name: "Скачать APK",
                                url: "https://github.com/Happ-proxy/happ-android/releases/latest/download/Happ.apk"
                            },
                        ],
                        instructions: [
                            {
                                title: "Установите и откройте Happ",
                                description: "Откройте страницу в Google Play и установите приложение. Или установите приложение из APK файла напрямую, если Google Play не работает.",
                                icon: "download"
                            },
                            {
                                title: "Добавить подписку",
                                description: "Нажмите кнопку ниже, чтобы добавить подписку",
                                icon: "cloud-download"
                            },
                            {
                                title: "Подключите и используйте",
                                description: "Откройте приложение и подключитесь к серверу",
                                icon: "check"
                            },
                        ],
                    },      
                    v2raytun: {
                        name: "v2RayTun",
                        icon: "",
                        sources: [
                            {
                                name: "Открыть в Google Play",
                                url: "https://play.google.com/store/apps/details?id=com.v2raytun.android&hl=ru",
                            }
                        ],
                        instructions: [
                            {
                                title: "Установите и откройте v2RayTun",
                                description: "Откройте страницу в Google Play и установите приложение.",
                                icon: "download"
                            },
                            {
                                title: "Добавить подписку",
                                description: "Нажмите кнопку ниже, чтобы импортировать конфигурацию",
                                icon: "cloud-download"
                            },
                            {
                                title: "Подключите и используйте",
                                description: "Откройте приложение и подключитесь к серверу",
                                icon: "check"
                            },
                        ],
                    },
                },
            },
            ios: {
                id: "ios",
                name: "iOS",
                icon: "device-mobile",
                providers: {
                    happ: {
                        name: "Happ",
                        icon: "star",
                        sources: [
                            {
                                name: "Открыть в App Store(Rus)",
                                url: "https://apps.apple.com/ru/app/happ-proxy-utility-plus/id6746188973",
                            },
                            {
                                name: "Открыть в App Store(Global)",
                                url: "https://apps.apple.com/us/app/happ-proxy-utility/id6504287215"
                            },
                        ],
                        instructions: [
                            {
                                title: "Установите и откройте Happ",
                                description: "Откройте страницу в App Store и установите приложение(Если приложение недостпуно попробуйте другую ссылку Rus или Global). Запустите его, в окне разрешения VPN-конфигурации нажмите Allow и введите свой пароль.",
                                icon: "download"
                            },
                            {
                                title: "Добавить подписку",
                                description: "Нажмите кнопку ниже — приложение откроется, и подписка добавится автоматически.",
                                icon: "cloud-download"
                            },
                            {
                                title: "Подключите и используйте",
                                description: "В главном разделе нажмите большую кнопку включения в центре для подключения к VPN. Не забудьте выбрать сервер в списке серверов. При необходимости выберите другой сервер из списка серверов.",
                                icon: "check"
                            },
                        ],
                    },      
                    v2raytun: {
                        name: "v2RayTun",
                        icon: "",
                        sources: [
                            {
                                name: "Открыть в App Store",
                                url: "https://apps.apple.com/ru/app/v2raytun/id6476628951",
                            }
                        ],
                        instructions: [
                            {
                                title: "Установите и откройте v2RayTun",
                                description: "Откройте страницу в App Store и установите приложение. Запустите его, в окне разрешения VPN-конфигурации нажмите Allow и введите свой пароль.",
                                icon: "download"
                            },
                            {
                                title: "Добавить подписку",
                                description: "Нажмите кнопку ниже — приложение откроется, и подписка добавится автоматически.",
                                icon: "cloud-download"
                            },
                            {
                                title: "Подключите и используйте",
                                description: "Откройте приложение и подключитесь к серверу",
                                icon: "check"
                            },
                        ],
                    },
                },
            },
            pc: {
                id: "pc",
                name: "ПК",
                icon: "device-desktop",
                providers: {
                    hiddify: {
                        name: "Hiddify",
                        icon: "star",
                        sources: [
                            {
                                name: "Windows",
                                url: "https://github.com/hiddify/hiddify-app/releases/download/v2.5.7/Hiddify-Windows-Setup-x64.exe"
                            },
                            {
                                name: "macOS",
                                url: "https://github.com/hiddify/hiddify-app/releases/download/v2.5.7/Hiddify-MacOS.dmg"
                            },
                            {
                                name: "Linux",
                                url: "https://github.com/hiddify/hiddify-app/releases/download/v2.5.7/Hiddify-Linux-x64.AppImage"
                            }
                        ],
                        instructions: [
                            {
                                title: "Скачайте Hiddify",
                                description: "В главном разделе нажмите большую кнопку включения в центре для подключения к VPN. При необходимости выберите другой сервер в разделе Прокси.",
                                icon: "download"
                            },
                            {
                                title: "Выбор/смена сервера",
                                description: "После подключения, слева выберите 'Прокси' и выберите нужный сервер.",
                                icon: "info-circle"
                            },
                            {
                                title: "Добавить подписку",
                                description: "Нажмите кнопку ниже, чтобы добавить подписку",
                                icon: "cloud-download"
                            },
                            {
                                title: "Подключите и используйте",
                                description: "В главном разделе нажмите большую кнопку включения в центре для подключения к VPN. Не забудьте выбрать сервер в списке серверов. При необходимости выберите другой сервер из списка серверов.",
                                icon: "check"
                            }
                        ]
                    },
                    clash: {
                        name: "Clash Verge",
                        icon: "bolt",
                        sources: [
                            {
                                name: "Windows",
                                url: "https://github.com/clash-verge-rev/clash-verge-rev/releases/download/v2.2.2/Clash.Verge_2.2.2_x64-setup.exe"
                            },
                            {
                                name: "macOS (Intel)",
                                url: "https://github.com/clash-verge-rev/clash-verge-rev/releases/download/v2.2.2/Clash.Verge_2.2.2_x64.dmg"
                            },
                            {
                                name: "macOS (Apple Silicon)",
                                url: "https://github.com/clash-verge-rev/clash-verge-rev/releases/download/v2.2.2/Clash.Verge_2.2.2_aarch64.dmg"
                            },
                            {
                                name: "Linux",
                                url: "https://github.com/clash-verge-rev/clash-verge-rev/releases"
                            },
                        ],
                        instructions: [
                            {
                                title: "Скачайте Clash Verge",
                                description: "Выберите подходящую версию для вашего устройства, нажмите на кнопку ниже и установите приложение.",
                                icon: "download"
                            },
                            {
                                title: "Смена языка",
                                description: "При установке приложения выбираем English, после запуска приложения язык будет Русский.",
                                icon: "info-circle"
                            },
                            {
                                title: "Добавить подписку",
                                description: "Нажмите кнопку ниже, чтобы добавить подписку",
                                icon: "cloud-download"
                            },
                            {
                                title: "Подключите и используйте",
                                description: "Выбрать сервер можно в разделе Прокси, включить VPN можно в разделе Настройки. Установите переключатель TUN Mode в положение ВКЛ.",
                                icon: "check"
                            }
                        ],
                    }
                },
            },
        },
        currentPlatform: "pc",
        currentProvider: "hiddify"
    };

    // Иконки SVG
    const icons = {
        "star": `<path d="M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"></path>`,
        "bolt": `<path d="M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11z"></path>`,
        "download": `<path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"></path><path d="M7 11l5 5l5 -5"></path><path d="M12 4l0 12"></path>`,
        "info-circle": `<path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path><path d="M12 9h.01"></path><path d="M11 12h1v4h1"></path>`,
        "cloud-download": `<path d="M19 18a3.5 3.5 0 0 0 0 -7h-1a5 4.5 0 0 0 -11 -2a4.6 4.4 0 0 0 -2.1 8.4"></path><path d="M12 13l0 9"></path><path d="M9 19l3 3l3 -3"></path>`,
        "check": `<path d="M5 12l5 5l10 -10"></path>`,
        "device-desktop": `<path d="M3 5a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10z"></path><path d="M7 20h10"></path><path d="M9 16v4"></path><path d="M15 16v4"></path>`,
        "device-mobile": `<path d="M6 5a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2v-14z"></path><path d="M11 4h2"></path><path d="M12 17v.01"></path>`,
        "external-link": `<path d="M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6"></path><path d="M11 13l9 -9"></path><path d="M15 4h5v5"></path>`,
        "user": `<path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"></path><path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path>`,
        "calendar": `<path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z"></path><path d="M16 3v4"></path><path d="M8 3v4"></path><path d="M4 11h16"></path><path d="M11 15h1"></path><path d="M12 15v3"></path>`,
        "arrows-up-down": `<path d="M7 3l0 18"></path><path d="M10 6l-3 -3l-3 3"></path><path d="M20 18l-3 3l-3 -3"></path><path d="M17 21l0 -18"></path>`,
        "chevron-down": `<path d="M6 9l6 6l6 -6"></path>`
    };

    // Генератор SVG иконок
    function getIcon(iconName, size = 16, stroke = 2, color = "currentColor") {
        return `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="${color}" stroke-width="${stroke}" stroke-linecap="round" stroke-linejoin="round">${icons[iconName]}</svg>`;
    }

    // Генерация HTML приложения
    function renderApp() {
        const currentPlatform = appData.platforms[appData.currentPlatform];
        const currentProvider = currentPlatform.providers[appData.currentProvider];
        
        document.getElementById('app').innerHTML = `
            <div class="header">
                <h1 class="title">Подписка</h1>
                <button class="btn btn-outline" id="get-link-btn">Получить ссылку</button>
            </div>

            <div class="card">
                <div class="accordion active" id="subscription-info">
                    <div class="accordion-header" onclick="toggleAccordion('subscription-info')">
                        <div class="accordion-title">
                            <div class="flex items-center">
                                <span>${appData.user.username}</span>
                                <span class="text-muted text-small mt-1">Истекает через ${appData.user.daysLeft} дня</span>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <div class="stat-icon" style="color: var(--tg-green-color); margin-right: 12px;">
                                ${getIcon('check', 20)}
                            </div>
                            ${getIcon('chevron-down', 16)}
                        </div>
                    </div>
                    <div class="accordion-content" style="max-height: 500px;">
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-label">
                                    ${getIcon('user', 16)}
                                    Имя пользователя
                                </div>
                                <div class="stat-value">${appData.user.username}</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">
                                    ${getIcon('check', 16)}
                                    Статус
                                </div>
                                <div class="stat-value">${appData.user.status}</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">
                                    ${getIcon('calendar', 16)}
                                    Истекает
                                </div>
                                <div class="stat-value">${appData.user.expiresAt}</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">
                                    ${getIcon('arrows-up-down', 16)}
                                    Трафик
                                </div>
                                <div class="stat-value">${appData.user.trafficUsed} / ${appData.user.trafficLimit}</div>
                                <div class="progress-container mt-1">
                                    <div class="progress-bar" style="width: ${appData.user.trafficPercent}%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="flex items-center justify-between mb-2">
                    <h2 class="title">Установка</h2>
                    <div class="select" id="device-select">
                        <div class="select-toggle" onclick="toggleSelect('device-select')">
                            <div class="flex items-center">
                                ${getIcon(currentPlatform.icon, 20, 2, "currentColor")}
                                <span>${currentPlatform.name}</span>
                            </div>
                            ${getIcon('chevron-down', 16)}
                        </div>
                        <div class="select-dropdown">
                            ${Object.values(appData.platforms).map(platform => `
                                <div class="select-option" onclick="selectOption('device-select', '${platform.id}', '${platform.name}')">
                                    <span>${platform.name}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>

                <div class="btn-group">
                    ${Object.entries(currentPlatform.providers).map(([id, provider]) => `
                        <button class="btn ${appData.currentProvider === id ? 'btn-light' : 'btn-outline'}" 
                                onclick="changeProvider('${id}')"
                                style="flex: 1;">
                            ${provider.icon ? getIcon(provider.icon, 16, 2, appData.currentProvider === id ? "gold" : "currentColor") : ''}
                            ${provider.name}
                        </button>
                    `).join('')}
                </div>

                <div class="timeline">
                    ${currentProvider.instructions.map((step, index) => `
                        <div class="timeline-item" ${index === 0 ? 'data-active="true"' : ''}>
                            <div class="timeline-bullet">
                                ${getIcon(step.icon, 14, 2, "white")}
                            </div>
                            <div class="timeline-content">
                                <h3 class="timeline-title">${step.title}</h3>
                                <p class="timeline-description">
                                    ${step.description}
                                </p>
                                ${index === 0 ? `
                                    <div class="btn-group">
                                        ${currentProvider.sources.map((source) => `
                                            <a href="${source.url}" target="_blank" class="btn btn-light">
                                                ${getIcon('external-link', 14)}
                                                ${source.name}
                                            </a>
                                        `).join('')}
                                    </div>
                                ` : ''}
                                ${index === 2 ? `
                                    <button class="btn btn-primary mt-2" id="add-subscription-btn">
                                        Добавить подписку
                                    </button>
                                ` : ''}
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>

            <div style="text-align: center; margin-top: var(--tg-spacing);">
                <button class="btn btn-outline">
                    <div class="flex items-center">
                        <span>🇷🇺</span>
                        <span>Русский</span>
                        ${getIcon('chevron-down', 16, 1.5)}
                    </div>
                </button>
            </div>
        `;

        // Инициализация обработчиков событий
        document.getElementById('get-link-btn').addEventListener('click', getLink);
        document.getElementById('add-subscription-btn')?.addEventListener('click', addSubscription);
    }

    // Функции для работы с UI
    function toggleAccordion(id) {
        const accordion = document.getElementById(id);
        const content = accordion.querySelector('.accordion-content');
        
        if (accordion.classList.contains('active')) {
            content.style.maxHeight = null;
            accordion.classList.remove('active');
        } else {
            content.style.maxHeight = content.scrollHeight + "px";
            accordion.classList.add('active');
        }
    }

    function toggleSelect(id) {
        document.getElementById(id).classList.toggle('active');
    }

    function selectOption(selectId, platformId, platformName) {
        appData.currentPlatform = platformId;
        // Reset provider to first available when platform changes
        const firstProvider = Object.keys(appData.platforms[platformId].providers)[0];
        appData.currentProvider = firstProvider;
        renderApp();
    }

    function changeProvider(providerId) {
        appData.currentProvider = providerId;
        renderApp();
    }

    // Функции для работы с приложением
    function getLink() {
        alert('Ссылка скопирована в буфер обмена');
        // Реальная реализация: navigator.clipboard.writeText(subscriptionLink)
    }

    function addSubscription() {
        const configUrl = "https://vite.pythonanyehere.com/vpn-config";
        const deepLinks = {
            clash: `clash://install-config?url=${encodeURIComponent(configUrl)}`,
            happ: `happ://import?url=${encodeURIComponent(configUrl)}`,
            v2raytun: `v2raytun://install?url=${encodeURIComponent(configUrl)}`
        };
        const appLink = deepLinks[appData.currentProvider] || configUrl;
        window.open(appLink, '_blank'); 
    }

    // Закрытие выпадающих списков при клике вне их
    document.addEventListener('click', function(event) {
        if (!event.target.closest('.select')) {
            document.querySelectorAll('.select').forEach(select => {
                select.classList.remove('active');
            });
        }
    });

    // Инициализация приложения
    renderApp();
</script>
</html>